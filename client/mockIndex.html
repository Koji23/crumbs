<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
</head>
<body>

  <script>
    var sendCheckMessages = true;
    var sendCreateNewRoom = false;
    var sendAddNewMessage = false;
    var requestInterval = 2000;

    window.setInterval(function() {
      if (sendCheckMessages) {
        $.ajax({
          url: "http://127.0.0.1:3000/",
          type: "GET",
          data: { location : [41.25, -120.97] },
          dataType: 'json',
        }).done(function(data) {
          console.log('checkMessages success', data)
        }).fail(function(err) {
          console.log('checkMessages err', err)
        })
      }

      if (sendCreateNewRoom) {
        $.ajax({
          url: "http://127.0.0.1:3000/",
          type: "POST",
          data: { location : [1, 1] },
          dataType: 'json',
          success: function(data) {
            console.log('sendCreateNewRoom success', data)
          },
          error: function(err) {
            console.log('sendCreateNewRoom err', err)
          },
        })        
      }

      if (sendAddNewMessage) {
        $.ajax({
          url: "http://127.0.0.1:3000/",
          type: "PUT",
          data: { location : [1, 1], message: 'Dubie' },
          dataType: 'json',
        }).done(function(data) {
          console.log('sendAddNewMessage success', data)
        }).fail(function(err) {
          console.log('sendAddNewMessage err', err)
        })        
      }
    }, requestInterval)

    
  </script>
  <h2> these requests are depreciated ;) embedded scripts make simulate ajax requests </h2>
  <h2>Get request for checking for messages in a room</h2>
  <form action="http://127.0.0.1:3000/" method="GET">
    Location:<br>
    <input type="json" name="location"><br>
    <input type="submit" value="Submit">
  </form>
  <br>
  <h2>Post request for creating new room</h2>
  <form action="http://127.0.0.1:3000/" method="POST">
    Location:<br>
    <input type="text" name="location"><br>
    Message:<br>
    <input type="text" name="message"><br>
    <input type="submit" value="Submit">
  </form>
  <h2>Put request for adding a message to a room </h2>
  <form action="http://127.0.0.1:3000/" method="PUT">
    Location:<br>
    <input type="json" name="location"><br>
    <input type="submit" value="Submit">
  </form>
  <br>

<p>Click the button to get your coordinates.</p>

<button onclick="getLocation()">Try It</button>

<p id="demo"></p>
</body>
<script>var x = document.getElementById("demo");
function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.watchPosition(showPosition);
    } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
    }
}
function showPosition(position) {
    x.innerHTML = "Latitude: " + position.coords.latitude + 
    "<br>Longitude: " + position.coords.longitude; 
}
</script>
</html>

